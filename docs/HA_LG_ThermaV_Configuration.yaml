# ============================================================================
# HOME ASSISTANT KONFIGURACE - LG THERMA V
# ============================================================================
# Generov√°no: 20.11.2025
# Zdroj: Optimalizovan√° konfigurace z lgscan.py (41 aktivn√≠ch registr≈Ø)
# Kalibrace: Power consumption kalibrov√°n s LG displejem (koeficient 0.002714)
# Pou≈æit√≠: Zkop√≠rovat do modbus sekce v Home Assistant configuration.yaml
# ============================================================================

modbus:
  - name: lg_therma_v
    type: tcp
    host: 192.168.100.199
    port: 502
    delay: 1
    timeout: 8
    
    sensors:
      # ============================================================================
      # üå°Ô∏è TEPLOTY - Tepeln√Ω monitoring syst√©mu
      # ============================================================================
      
      - name: "LG ThermaV Outdoor Air Temperature"          # Venkovn√≠ teplota vzduchu
        slave: 1
        address: 12           # 30013-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement
        
      - name: "LG ThermaV Water Inlet Temperature"          # Teplota vody na vstupu
        slave: 1
        address: 2            # 30003-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement
        
      - name: "LG ThermaV Water Outlet Temperature"         # Teplota vody na v√Ωstupu
        slave: 1
        address: 3            # 30004-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement
        
      - name: "LG ThermaV Target Temperature Circuit 1"     # C√≠lov√° teplota okruh 1
        slave: 1
        address: 2            # 40003-40001
        input_type: holding
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        
      - name: "LG ThermaV Room Temperature Circuit 1"       # Pokojov√° teplota okruh 1
        slave: 1
        address: 7            # 30008-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement
        
      - name: "LG ThermaV Room Temperature Circuit 1 Hold"  # Pokojov√° teplota okruh 1 (holding)
        slave: 1
        address: 3            # 40004-40001
        input_type: holding
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        
      - name: "LG ThermaV Auto Mode Shift Circuit 1"        # Posun hodnoty auto re≈æim
        slave: 1
        address: 4            # 40005-40001
        input_type: holding
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        
      - name: "LG ThermaV DHW Tank Temperature"             # Teplota z√°sobn√≠ku TUV
        slave: 1
        address: 5            # 30006-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement
        
      - name: "LG ThermaV DHW Target Temperature"           # C√≠lov√° teplota TUV
        slave: 1
        address: 8            # 40009-40001
        input_type: holding
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        
      - name: "LG ThermaV Backup Heater Outlet Temp"       # Teplota v√Ωstupu z√°lo≈æn√≠ho oh≈ô√≠vaƒçe
        slave: 1
        address: 4            # 30005-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement
        
      - name: "LG ThermaV Backup Heater Temperature"        # Teplota z√°lo≈æn√≠ho oh≈ô√≠vaƒçe
        slave: 1
        address: 16           # 30017-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "¬∞C"
        device_class: temperature
        state_class: measurement

      # ============================================================================
      # ‚öôÔ∏è HYDRAULIKA & KOMPRESN√ç SYST√âM - V√Ωkon a tlaky
      # ============================================================================
      
      - name: "LG ThermaV Current Flow Rate"               # Pr≈Øtok vody
        slave: 1
        address: 8            # 30009-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "l/min"
        state_class: measurement
        
      - name: "LG ThermaV Water Pressure Input"            # Tlak vody (input)
        slave: 1
        address: 13           # 30014-1
        input_type: input
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "bar"
        device_class: pressure
        state_class: measurement
        
      - name: "LG ThermaV Water Pressure Hold"             # Tlak vody (holding)
        slave: 1
        address: 12           # 40013-40001
        input_type: holding
        data_type: int16
        scale: 0.1
        precision: 1
        unit_of_measurement: "bar"
        device_class: pressure
        
      - name: "LG ThermaV Evaporator Pressure"             # Tlak v√Ωparn√≠ku
        slave: 1
        address: 21           # 30022-1
        input_type: input
        data_type: int16
        scale: 1
        precision: 0
        unit_of_measurement: "bar"
        device_class: pressure
        state_class: measurement
        
      - name: "LG ThermaV Compressor Pressure"             # Tlak kompresoru
        slave: 1
        address: 22           # 30023-1
        input_type: input
        data_type: int16
        scale: 1
        precision: 0
        unit_of_measurement: "bar"
        device_class: pressure
        state_class: measurement
        
      - name: "LG ThermaV Compressor RPM"                  # Ot√°ƒçky kompresoru
        slave: 1
        address: 23           # 30024-1
        input_type: input
        data_type: int16
        scale: 60
        precision: 0
        unit_of_measurement: "rpm"
        state_class: measurement

      # ============================================================================
      # ‚ö° SPOT≈òEBA ENERGIE - Kalibrovan√° hodnota
      # ============================================================================
      
      - name: "LG ThermaV Electrical Power Consumption"    # PRIM√ÅRN√ç - Spot≈ôeba energie
        slave: 1
        address: 17           # 30018-1
        input_type: input
        data_type: int16
        scale: 0.002714       # Kalibrov√°no s LG displejem
        precision: 2
        unit_of_measurement: "kW"
        device_class: power
        state_class: measurement

      # ============================================================================
      # üìä STAVY & RE≈ΩIMY - Syst√©mov√© informace
      # ============================================================================
      
      - name: "LG ThermaV Error Code"                      # K√≥d chyby
        slave: 1
        address: 0            # 30001-1
        input_type: input
        data_type: int16
        scale: 1
        precision: 0
        
      - name: "LG ThermaV ODU Operation Cycle"             # Cyklus provozu venkovn√≠ jednotky
        slave: 1
        address: 1            # 30002-1
        input_type: input
        data_type: int16
        scale: 1
        precision: 0
        
      - name: "LG ThermaV Operation Mode"                  # Re≈æim provozu
        slave: 1
        address: 0            # 40001-40001
        input_type: holding
        data_type: int16
        scale: 1
        precision: 0
        
      - name: "LG ThermaV System Mode"                     # Syst√©mov√Ω re≈æim (duplik√°t)
        slave: 1
        address: 0            # 40001-40001
        input_type: holding
        data_type: int16
        scale: 1
        precision: 0
        
      - name: "LG ThermaV Control Type"                    # Typ ≈ô√≠zen√≠
        slave: 1
        address: 1            # 40002-40001
        input_type: holding
        data_type: int16
        scale: 1
        precision: 0
        
      - name: "LG ThermaV Control Method"                  # Metoda ≈ô√≠zen√≠ okruh≈Ø
        slave: 1
        address: 1            # 40002-40001
        input_type: holding
        data_type: int16
        scale: 1
        precision: 0

    binary_sensors:
      # ============================================================================
      # üîå BIN√ÅRN√ç STATUSY - Monitorov√°n√≠ stav≈Ø
      # ============================================================================
      
      - name: "LG ThermaV Water Flow Status"              # Status pr≈Øtoku vody
        slave: 1
        address: 0            # 10001-10001
        input_type: discrete
        
      - name: "LG ThermaV Water Pump Status"              # Status vodn√≠ pumpy
        slave: 1
        address: 1            # 10002-10001
        input_type: discrete
        
      - name: "LG ThermaV External Water Pump Status"     # Status extern√≠ pumpy
        slave: 1
        address: 2            # 10003-10001
        input_type: discrete
        
      - name: "LG ThermaV Compressor Status"              # Status kompresoru
        slave: 1
        address: 3            # 10004-10001
        input_type: discrete
        
      - name: "LG ThermaV Defrosting Status"              # Status odmrazov√°n√≠
        slave: 1
        address: 4            # 10005-10001
        input_type: discrete
        
      - name: "LG ThermaV DHW Heating Status"             # Status oh≈ôevu TUV
        slave: 1
        address: 5            # 10006-10001
        input_type: discrete
        
      - name: "LG ThermaV DHW Disinfection Status"        # Status dezinfekce TUV
        slave: 1
        address: 6            # 10007-10001
        input_type: discrete
        
      - name: "LG ThermaV Silent Mode Status"             # Status tich√©ho re≈æimu
        slave: 1
        address: 7            # 10008-10001
        input_type: discrete
        
      - name: "LG ThermaV Cooling Status"                 # Status chlazen√≠
        slave: 1
        address: 8            # 10009-10001
        input_type: discrete
        
      - name: "LG ThermaV Backup Heater Step 1 Status"   # Status z√°lo≈æn√≠ oh≈ô√≠vaƒç 1
        slave: 1
        address: 10           # 10011-10001
        input_type: discrete
        
      - name: "LG ThermaV Backup Heater Step 2 Status"   # Status z√°lo≈æn√≠ oh≈ô√≠vaƒç 2
        slave: 1
        address: 11           # 10012-10001
        input_type: discrete
        
      - name: "LG ThermaV DHW Boost Heater Status"       # Status v√Ωkonov√Ω oh≈ô√≠vaƒç TUV
        slave: 1
        address: 12           # 10013-10001
        input_type: discrete
        
      - name: "LG ThermaV Error Status"                   # Status chyby
        slave: 1
        address: 13           # 10014-10001
        input_type: discrete

    switches:
      # ============================================================================
      # üéõÔ∏è OVL√ÅDAC√ç PRVKY - Bin√°rn√≠ ovl√°d√°n√≠
      # ============================================================================
      
      - name: "LG ThermaV Silent Mode Control"            # Ovl√°d√°n√≠ tich√©ho re≈æimu
        slave: 1
        address: 2            # 3-1
        command_on: 1
        command_off: 0
        
      - name: "LG ThermaV Trigger Disinfection"           # Spu≈°tƒõn√≠ dezinfekce
        slave: 1
        address: 3            # 4-1
        command_on: 1
        command_off: 0
        
      - name: "LG ThermaV Emergency Stop"                 # Nouzov√© zastaven√≠
        slave: 1
        address: 4            # 5-1
        command_on: 1
        command_off: 0
        
      - name: "LG ThermaV Emergency Operation"            # Nouzov√Ω provoz
        slave: 1
        address: 5            # 6-1
        command_on: 1
        command_off: 0

# ============================================================================
# üí§ ZAKOMENTOVAN√â REGISTRY - Pro √∫plnost dokumentace
# ============================================================================
# N√°sleduj√≠c√≠ registry jsou v registers.yaml zakomentovan√© jako nepot≈ôebn√©:

# - 30007 - Solar Collector Temperature (nem√°m sol√°rn√≠ kolektor)
# - 40011 - Compressor Modulation (nepot≈ôebn√© pro monitoring)
# - 40018 - Electrical Power Consumption (nefunkƒçn√≠ - v≈ædy 0)
# - 30012 - Energy State Input (nepot≈ôebn√©)
# - 40010 - Energy State Input Detailed (nepot≈ôebn√©)
# - 10010 - Solar Pump Status (nem√°m sol√°rn√≠ pumpu)
# - 10015 - Emergency Operation Available Space Heating/Cooling (nepot≈ôebn√©)
# - 10016 - Emergency Operation Available DHW (nepot≈ôebn√©)
# - 10017 - Mix Pump Status (nepot≈ôebn√©)
# - 00001 - Enable/Disable Heating/Cooling (nepot≈ôebn√©)
# - 00002 - Enable/Disable DHW (nepot≈ôebn√©)

# Pokud pot≈ôebuje≈° nƒõkter√Ω z tƒõchto registr≈Ø aktivovat:
# 1. Odkomentuj v registers.yaml
# 2. P≈ôidej odpov√≠daj√≠c√≠ HA konfiguraci podle vzoru v√Ω≈°e
# 3. Restart lgscan.py a Home Assistant

# ============================================================================
# POZN√ÅMKY K POU≈ΩIT√ç:
# ============================================================================
# 1. Zkop√≠ruj tuto konfiguraci do sv√©ho configuration.yaml
# 2. Restart Home Assistant
# 3. V≈°echny entity budou dostupn√© s prefixy "LG ThermaV"
# 4. Power consumption je kalibrov√°n - zobrazuje stejn√© hodnoty jako displej
# 5. Zakomentovan√© registry (9 ks) nejsou zahrnuty pro ƒçist≈°√≠ konfiguraci
# 
# HLAVN√ç ENTITY:
# - sensor.lg_thermav_electrical_power_consumption (kalibrovan√Ω p≈ô√≠kon)
# - sensor.lg_thermav_outdoor_air_temperature (venkovn√≠ teplota)
# - sensor.lg_thermav_water_inlet_temperature (vstup)
# - sensor.lg_thermav_water_outlet_temperature (v√Ωstup)
# - sensor.lg_thermav_dhw_tank_temperature (TUV)
# - sensor.lg_thermav_current_flow_rate (pr≈Øtok)
# - sensor.lg_thermav_compressor_rpm (ot√°ƒçky)
# - binary_sensor.lg_thermav_compressor_status (bƒõ≈æ√≠/nebƒõ≈æ√≠)
# ============================================================================